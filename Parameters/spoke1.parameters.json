{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "VNAddressRangePrimary": {
            "value": "10.0.4.0/22"
        },
        "VNAddressRangeDR": {
            "value": "10.1.4.0/22"
        },
        "Identifier": {
            "value": "app1"
        },
        "subnetsToDeploy": {
            "value": [
                {
                    "subnetName": "appgateway",
                    "subnetAddressRangePrimary": "10.0.4.0/27",
                    "subnetAddressRangeDR": "10.1.4.0/27"
                },
                {
                    "subnetName": "app",
                    "subnetAddressRangePrimary": "10.0.5.0/27",
                    "subnetAddressRangeDR": "10.1.5.0/27"
                },
                {
                    "subnetName": "web",
                    "subnetAddressRangePrimary": "10.0.6.0/27",
                    "subnetAddressRangeDR": "10.1.6.0/27"
                },
                {
                    "subnetName": "sql",
                    "subnetAddressRangePrimary": "10.0.7.0/27",
                    "subnetAddressRangeDR": "10.1.7.0/27"
                }
            ]
        },
        "DefaultPw": {
            "reference": {
                "keyVault": {
                    "id": "/subscriptions/847f0a11-c32e-4c42-8d99-ae7bb0dd6b59/resourceGroups/rg-pr-core-key/providers/Microsoft.KeyVault/vaults/kv-pr-core"
                },
                "secretName": "DefaultPw"
            }
        },
        "Services": {
            "value": [
                {
                    "Identifier": "web",
                    "subnetName": "web",
                    "OS": "WS2019",
                    "Encrypt":true,
                    "Antimalware": true,
                    "Monitor": true,
                    "loadBalancer": true,
                    "LBType": "HTTPS"
                },
                {
                    "Identifier": "app",
                    "subnetName": "app",
                    "OS": "WS2019",
                    "Encrypt":true,
                    "Antimalware": true,
                    "Monitor": true,
                    "loadBalancer": true,
                    "LBType": "HTTPS"
                }
            ]
        },
        "VMstoDeploy": {
            "value": [
                {
                    "serviceIdentifier": "web",
                    "VMName": "vm-app1-web-01",
                    "publicIP": false
                },
                {
                    "serviceIdentifier": "web",
                    "VMName": "vm-app1-web-02",
                    "OS": "WS2019",
                    "publicIP": false
                },
                {
                    "serviceIdentifier": "app",
                    "VMName": "vm-app1-app-01",
                    "publicIP": false
                },
                {
                    "serviceIdentifier": "app",
                    "VMName": "vm-app1-app-02",
                    "OS": "WS2019",
                    "publicIP": false
                }
            ]
        },
        "DataDiskstoDeploy": {
            "value": [
                {
                    "serviceIdentifier": "web",
                    "VMName": "vm-app1-web-01",
                    "diskSizeGB": 32,
                    "lun": 0
                },
                {
                    "serviceIdentifier": "web",
                    "VMName": "vm-app1-web-02",
                    "diskSizeGB": 32,
                    "lun": 1
                },
                {
                    "serviceIdentifier": "app",
                    "VMName": "vm-app1-app-01",
                    "diskSizeGB": 32,
                    "lun": 0
                },
                {
                    "serviceIdentifier": "app",
                    "VMName": "vm-app1-app-02",
                    "diskSizeGB": 32,
                    "lun": 1
                }
            ]
        },
        "DSCConfigurations": {
            "value": [
                {
                    "serviceIdentifier": "web",
                    "VMName": "vm-app1-web-01",
                    "DSCConfigurationName": "WebServerRole"
                },
                {
                    "serviceIdentifier": "web",
                    "VMName": "vm-app1-web-02",
                    "DSCConfigurationName": "WebServerRole"
                },
                {
                    "serviceIdentifier": "app",
                    "VMName": "vm-app1-app-01",
                    "DSCConfigurationName": "WebServerRole"
                },
                {
                    "serviceIdentifier": "app",
                    "VMName": "vm-app1-app-02",
                    "DSCConfigurationName": "WebServerRole"
                }
            ]
        }
    }
}